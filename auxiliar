def ajustar_matriz_quantizacao(matriz_base, qualidade):
    if qualidade < 50:
        fator = 50 / qualidade
    else:
        fator = (100-qualidade) / 50
    if qualidade == 0:
        return np.ones_like(matriz_base)   
    
    matriz_ajustada = np.round((matriz_base * fator))
    matriz_ajustada[matriz_ajustada < 1] = 1
    matriz_ajustada[matriz_ajustada > 255] = 255
    
    
    return matriz_ajustada.astype(np.uint8)